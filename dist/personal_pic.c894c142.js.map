{"version":3,"sources":["personal_pic.js"],"names":["ID","localStorage","getItem","l_id","CheckImgExists","imgurl","Promise","resolve","reject","ImgObj","Image","src","onload","res","onerror","err","port","have_pic","then","$","attr","catch","document","ready","submit","event","preventDefault","formData","FormData","id","append","ajax","type","url","data","processData","contentType","success","r","console","log","error","e","setTimeout","location","reload"],"mappings":"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","file":"personal_pic.c894c142.js","sourceRoot":"../parcel","sourcesContent":["//import ID from './signup.js'\r\nvar ID = localStorage.getItem(\"ID\")\r\nvar l_id = localStorage.getItem(\"ID\")\r\nfunction CheckImgExists(imgurl) {\r\n  return new Promise(function(resolve, reject) {\r\n    var ImgObj = new Image(); //判断图片是否存在\r\n    ImgObj.src = imgurl;\r\n    ImgObj.onload = function(res) {\r\n      resolve(res);\r\n    }\r\n    ImgObj.onerror = function(err) {\r\n      reject(err)\r\n    }\r\n  })\r\n}\r\nvar port=6168\r\n\r\n//使用方式\r\nvar have_pic = 0\r\n\r\n  CheckImgExists(\r\n    \"http://luffy.ee.ncku.edu.tw:\"+port+\"/image/personal_pic/\"+l_id+\".jpg\"\r\n    //imgurl here\r\n  ).then(()=>{\r\n    \r\n    $(\"img#change_pic\").attr(\"src\", \"./image/personal_pic/\"+l_id+\".jpg\")\r\n    $(\"#photo_and_name img\").attr(\"src\", \"./image/personal_pic/\"+l_id+\".jpg\")\r\n    $(\".personal_btn_bg img#personal_btn\").attr(\"src\", \"./image/personal_pic/\"+l_id+\".jpg\")\r\n    have_pic=1\r\n    //success callback\r\n  }).catch(()=>{\r\n    // console.log(2)\r\n    if(have_pic === 0)\r\n    {\r\n      $(\"img#change_pic\").attr(\"src\", \"./image/personal_pic/2.jpg\")\r\n      $(\"#photo_and_name img\").attr(\"src\", \"./image/personal_pic/2.jpg\")\r\n      $(\".personal_btn_bg img#personal_btn\").attr(\"src\", \"./image/personal_pic/2.jpg\")\r\n    }\r\n    \r\n      //fail callback\r\n  })\r\n  CheckImgExists(\r\n    \"http://luffy.ee.ncku.edu.tw:\"+port+\"/image/personal_pic/\"+l_id+\".png\"\r\n    //imgurl here\r\n  ).then(()=>{\r\n    $(\"#change_personal_page img#change_pic\").attr(\"src\", \"./image/personal_pic/\"+l_id+\".png\")\r\n    $(\"#personal_page #photo_and_name img\").attr(\"src\", \"./image/personal_pic/\"+l_id+\".png\")\r\n    $(\".personal_btn_bg img#personal_btn\").attr(\"src\", \"./image/personal_pic/\"+l_id+\".png\")\r\n    have_pic=1\r\n    //success callback\r\n  }).catch(()=>{\r\n    if(have_pic === 0)\r\n    {\r\n      $(\"#change_personal_page img#change_pic\").attr(\"src\", \"./image/personal_pic/2.jpg\")\r\n      $(\"#personal_page #photo_and_name img\").attr(\"src\", \"./image/personal_pic/2.jpg\")\r\n      $(\".personal_btn_bg img#personal_btn\").attr(\"src\", \"./image/personal_pic/2.jpg\")\r\n    }\r\n\r\n      //fail callback\r\n  })\r\n  CheckImgExists(\r\n    \"http://luffy.ee.ncku.edu.tw:\"+port+\"/image/personal_pic/\"+l_id+\".jpeg\"\r\n    //imgurl here\r\n  ).then(()=>{\r\n    $(\"#change_personal_page img#change_pic\").attr(\"src\", \"./image/personal_pic/\"+l_id+\".jpeg\")\r\n    $(\"#personal_page #photo_and_name img\").attr(\"src\", \"./image/personal_pic/\"+l_id+\".jpeg\")\r\n    $(\".personal_btn_bg img#personal_btn\").attr(\"src\", \"./image/personal_pic/\"+l_id+\".jpeg\")\r\n    have_pic=1\r\n    //success callback\r\n  }).catch(()=>{\r\n    if(have_pic === 0)\r\n    {\r\n      $(\"#change_personal_page img#change_pic\").attr(\"src\", \"./image/personal_pic/2.jpg\")\r\n      $(\"#personal_page #photo_and_name img\").attr(\"src\", \"./image/personal_pic/2.jpg\")\r\n      $(\".personal_btn_bg img#personal_btn\").attr(\"src\", \"./image/personal_pic/2.jpg\")\r\n    }\r\n    \r\n      //fail callback\r\n  })\r\n  CheckImgExists(\r\n    \"http://luffy.ee.ncku.edu.tw:\"+port+\"/image/personal_pic/\"+l_id+\".MOV\"\r\n    //imgurl here\r\n  ).then(()=>{\r\n    $(\"#change_personal_page img#change_pic\").attr(\"src\", \"./image/personal_pic/\"+l_id+\".MOV\")\r\n    $(\"#personal_page #photo_and_name img\").attr(\"src\", \"./image/personal_pic/\"+l_id+\".MOV\")\r\n    $(\".personal_btn_bg img#personal_btn\").attr(\"src\", \"./image/personal_pic/\"+l_id+\".MOV\")\r\n    have_pic=1\r\n    //success callback\r\n  }).catch(()=>{\r\n    if(have_pic === 0)\r\n    {\r\n      $(\"#change_personal_page img#change_pic\").attr(\"src\", \"./image/personal_pic/2.jpg\")\r\n      $(\"#personal_page #photo_and_name img\").attr(\"src\", \"./image/personal_pic/2.jpg\")\r\n      $(\".personal_btn_bg img#personal_btn\").attr(\"src\", \"./image/personal_pic/2.jpg\")\r\n    }\r\n    \r\n      //fail callback\r\n  })\r\n  CheckImgExists(\r\n    \"http://luffy.ee.ncku.edu.tw:\"+port+\"/image/personal_pic/\"+l_id+\".mp4\"\r\n    //imgurl here\r\n  ).then(()=>{\r\n    $(\"#change_personal_page img#change_pic\").attr(\"src\", \"./image/personal_pic/\"+l_id+\".mp4\")\r\n    $(\"#personal_page #photo_and_name img\").attr(\"src\", \"./image/personal_pic/\"+l_id+\".mp4\")\r\n    $(\".personal_btn_bg img#personal_btn\").attr(\"src\", \"./image/personal_pic/\"+l_id+\".mp4\")\r\n    have_pic=1\r\n    //success callback\r\n  }).catch(()=>{\r\n    if(have_pic === 0)\r\n    {\r\n      $(\"#change_personal_page img#change_pic\").attr(\"src\", \"./image/personal_pic/2.jpg\")\r\n      $(\"#personal_page #photo_and_name img\").attr(\"src\", \"./image/personal_pic/2.jpg\")\r\n      $(\".personal_btn_bg img#personal_btn\").attr(\"src\", \"./image/personal_pic/2.jpg\")\r\n    }\r\n    \r\n      //fail callback\r\n  })\r\n// }\r\n\r\n$(document).ready(function() {\r\n  \r\n  \r\n  $('#image_summit').submit(function (event) {\r\n      event.preventDefault()\r\n      let formData = new FormData(this)\r\n      let id = ID();\r\n      formData.append('usr_name', id)\r\n      $.ajax({\r\n        type: 'POST',\r\n        url: '/upload',\r\n        data: formData,\r\n        processData: false,\r\n        contentType: false,\r\n        success: function (r) {\r\n          console.log(r)\r\n        },\r\n        error: function(e) {\r\n          console.log(e)\r\n        }\r\n      })\r\n      setTimeout(() => {\r\n        location.reload();\r\n      }, 500)\r\n      //\r\n      // $(\"img#change_pic\").attr(\"src\", \"./image/personal_pic/\"+l_id+\".jpg\")\r\n      // $(\"#photo_and_name img\").attr(\"src\", \"./image/personal_pic/\"+l_id+\".jpg\")\r\n      // $(\"img#personal_btn\").attr(\"src\", \"./image/personal_pic/\"+l_id+\".jpg\")\r\n      //$(\"#change_pic img\").attr(\"src\", \"./image/personal_pic/F64081127.jpg\")\r\n  })\r\n  \r\n})\r\n"]}